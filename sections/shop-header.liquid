<section class="shop-header">
  {% if section.settings.show_background_image and section.settings.background_image %}
    <div class="shop-header__background">
      <img 
        src="{{ section.settings.background_image | image_url: width: 1920 }}" 
        alt="{{ collection.title }}"
        loading="lazy"
        width="1920"
        height="400"
      >
      <div class="shop-header__overlay"></div>
    </div>
  {% endif %}
  
  <div class="shop-header__container">
    <div class="shop-header__content">
      {% if section.settings.show_breadcrumbs %}
        <nav class="shop-header__breadcrumbs" aria-label="Breadcrumb">
          <a href="{{ routes.root_url }}">Home</a>
          <span class="breadcrumb-separator">/</span>
          <span>{{ collection.title }}</span>
        </nav>
      {% endif %}
      
      <h1 class="shop-header__title">{{ collection.title }}</h1>
      
      {% if collection.description != blank %}
        <div class="shop-header__description">
          {{ collection.description }}
        </div>
      {% endif %}
      
      {% if section.settings.show_product_count %}
        <div class="shop-header__count">
          <span class="product-count-number">{{ collection.products_count }}</span>
          <span class="product-count-label">
            {% if collection.products_count == 1 %}
              Product
            {% else %}
              Products
            {% endif %}
          </span>
        </div>
      {% endif %}
    </div>
  </div>
</section>

{% stylesheet %}
  .shop-header {
    position: relative;
    width: 100vw;
    max-width: 100vw;
    padding: var(--spacing-4xl) var(--spacing-lg);
    background: linear-gradient(135deg, rgba(45, 80, 22, 0.05) 0%, rgba(74, 124, 44, 0.02) 100%);
    border-bottom: 1px solid var(--border-color);
  }

  .shop-header__background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
  }

  .shop-header__background img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .shop-header__overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%);
  }

  .shop-header__container {
    position: relative;
    z-index: 2;
    max-width: 1400px;
    margin: 0 auto;
  }

  .shop-header__content {
    text-align: center;
  }

  .shop-header__breadcrumbs {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-lg);
    font-size: var(--body-small);
    color: rgba(26, 26, 26, 0.6);
  }

  .shop-header__breadcrumbs a {
    color: var(--sage-green);
    text-decoration: none;
    transition: color var(--transition-base);
  }

  .shop-header__breadcrumbs a:hover {
    color: var(--forest-green);
  }

  .breadcrumb-separator {
    color: rgba(26, 26, 26, 0.4);
  }

  .shop-header__title {
    font-family: var(--font-heading);
    font-size: clamp(36px, 5vw, 64px);
    font-weight: 900;
    color: var(--forest-green);
    margin-bottom: var(--spacing-md);
    letter-spacing: -0.02em;
    line-height: 1.1;
  }

  .shop-header__description {
    font-size: var(--body-large);
    color: rgba(26, 26, 26, 0.7);
    line-height: 1.7;
    max-width: 800px;
    margin: 0 auto var(--spacing-xl);
  }

  .shop-header__count {
    display: inline-flex;
    align-items: baseline;
    gap: var(--spacing-xs);
    padding: var(--spacing-sm) var(--spacing-lg);
    background-color: var(--white);
    border: 2px solid var(--border-color);
    border-radius: var(--radius-full);
    font-size: var(--body-normal);
  }

  .product-count-number {
    font-family: var(--font-heading);
    font-size: var(--h4-size);
    font-weight: 700;
    color: var(--forest-green);
  }

  .product-count-label {
    color: rgba(26, 26, 26, 0.6);
    text-transform: uppercase;
    font-size: var(--body-small);
    letter-spacing: 0.05em;
  }

  @media (max-width: 768px) {
    .shop-header {
      padding: var(--spacing-3xl) var(--spacing-md);
    }

    .shop-header__breadcrumbs {
      font-size: var(--body-xs);
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Shop Header",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_breadcrumbs",
      "label": "Show Breadcrumbs",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_product_count",
      "label": "Show Product Count",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_background_image",
      "label": "Show Background Image",
      "default": false
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background Image"
    }
  ],
  "presets": [
    {
      "name": "Shop Header"
    }
  ]
}
{% endschema %}
